<div align="center">
  <h1>webpack-react ğŸ‘‹</h1>
<p>CRA ì—†ì´ ë§Œë“¤ì–´ë³´ë©° React ê°œë°œí™˜ê²½ ì´í•´í•˜ê¸°</p>
  <p>
    ì°¸ê³  íŠœí† ë¦¬ì–¼: ê¹€ì •í™˜ ë‹˜ì˜ <a href="https://github.com/jeonghwan-kim/lecture-frontend-dev-env/tree/1-webpack/3-plugin">í”„ë¡ íŠ¸ì—”ë“œ ê°œë°œ í™˜ê²½ì˜ ì´í•´</a>
  </p>
</div>



## 1. í”„ë¡œì íŠ¸ ì´ˆê¸° ì„¤ì •

ì›¹íŒ©ê³¼ ë¦¬ì•¡íŠ¸ë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ í•„ìš”í•œ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì„¤ì¹˜í•´ë³´ì.

```shell
$ npm init -y
```

ìœ„ ëª…ë ¹ì–´ë¡œ ê°œë°œ í”„ë¡œì íŠ¸ë¥¼ ìƒì„±í•  ìˆ˜ ìˆë‹¤.

íŒ¨í‚¤ì§€ ì´ë¦„, ë²„ì „ ë“± í”„ë¡œì íŠ¸ì™€ ê´€ë ¨ëœ ì •ë³´ë“¤ì„ ë‹µë³€í•˜ê±°ë‚˜, ë¹ˆì¹¸ìœ¼ë¡œ ë‘ì–´ ê¸°ë³¸ê°’ì„ ì…ë ¥í•  ìˆ˜ ìˆë‹¤. ëª¨ë‘ ê¸°ë³¸ê°’ì„ ì‚¬ìš©í•  ê²ƒì´ë¼ë©´ `-y` í”Œë˜ê·¸ë¥¼ ë¶™ì—¬ ì§ˆë¬¸ì„ ìŠ¤í‚µí•˜ê³  **package.json** íŒŒì¼ì„ ìƒì„±í•  ìˆ˜ ìˆë‹¤.



## 2. Webpack ì„¤ì •

### 2-1. Webpack ì´ë€?

ì›¹íŒ©ì€ ì—¬ëŸ¬ê°œì˜ íŒŒì¼ì„ í•˜ë‚˜ë¡œ í•©ì³ì£¼ëŠ” **ëª¨ë“ˆ ë²ˆë“¤ëŸ¬**ì´ë‹¤. í•˜ë‚˜ì˜ ì‹œì‘ì  (entry point) ìœ¼ë¡œë¶€í„° ì˜ì¡´ì ì¸ ëª¨ë“ˆì„ ì „ë¶€ ì°¾ì•„ë‚´ í•˜ë‚˜ì˜ ê²°ê³¼ë¬¼ì„ ë§Œë“¤ì–´ë‚¸ë‹¤.

webpack íŒ¨í‚¤ì§€ì™€ ì›¹íŒ© ì»¤ë§¨ë“œ ë¼ì¸ ì¸í„°í˜ì´ìŠ¤ì¸ webpack-cli ë¥¼ ì„¤ì¹˜í•˜ì.

```shell
$ npm install -D webpack webpack-cli
```

`-D`  í”Œë˜ê·¸ëŠ” ê°œë°œ ë‹¨ê³„ì—ì„œë§Œ ì‚¬ìš©í•˜ê¸°ì— devDependencies ì— ì¶”ê°€í•¨ì„ ì˜ë¯¸í•œë‹¤.

### 2-2. Webpack ì„¤ì •í•˜ê¸°

Webpackì—ì„œ 3ê°€ì§€ ì˜µì…˜ë§Œ ì‚¬ìš©í•˜ë©´ ì½”ë“œë¥¼ ë²ˆë“¤ë§ í•  ìˆ˜ ìˆë‹¤.

- `--mode` : ì›¹íŒ© ì‹¤í–‰ ëª¨ë“œë¥¼ ì§€ì •í•œë‹¤. productionì€ ìµœì í™”ë˜ì–´ ë¹Œë“œë˜ëŠ” íŠ¹ì§•ì´, developmentëŠ” (ìµœì í™” ì—†ì´) ë¹ ë¥´ê²Œ ë¹Œë“œë˜ëŠ” íŠ¹ì§•ì´ ìˆë‹¤.
- `--entry` : ì–´í”Œë¦¬ì¼€ì´ì…˜ ì§„ì…ì  ê²½ë¡œë¥¼ ì§€ì •í•œë‹¤. entryì— ëª…ì‹œí•œ íŒŒì¼ ê¸°ì¤€ìœ¼ë¡œ ëª¨ë“  dependencyë¥¼ ì°¾ì•„ í•˜ë‚˜ì˜ íŒŒì¼ë¡œ í•©ì¹˜ê²Œ ëœë‹¤
- `--output` : ì›¹íŒ©ì—ì„œ ë¹Œë“œë¥¼ ì™„ë£Œí•˜ë©´ outputì— ìˆëŠ” ì •ë³´ë¥¼ í†µí•´ ë¹Œë“œ íŒŒì¼ì„ ìƒì„±í•œë‹¤



ê°œë°œí•  ë•Œë§ˆë‹¤ í„°ë¯¸ë„ì— `--mode`, `--entry`, `--output` ì˜µì…˜ì„ ì‚¬ìš©í•´ ë²ˆë“¤ë§ í•  ìˆ˜ë„ ìˆì§€ë§Œ, ì›¹íŒ© ì„¤ì •íŒŒì¼ì¸ **webpack.config.json** ì— ì˜µì…˜ì„ ì‘ì„±í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤.

> webpack.config.js

```js
const path = require('path');

module.exports = {
  mode: 'development',
  entry: {
    main: './src/app.js'
  },
  output: {
    // [name] ì—ëŠ” entryì— ì¶”ê°€í•œ mainì´ ë¬¸ìì—´ë¡œ ë“¤ì–´ê°„ë‹¤
    filename: '[name].js',
    //ì ˆëŒ€ ê²½ë¡œë¥¼ ì‚¬ìš©í•˜ë¯€ë¡œ ë…¸ë“œ ì½”ì–´ ëª¨ë“ˆì¸ pathì˜ resolve() í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•´ ê³„ì‚°í•œë‹¤
    path: path.resolve('./dist'),
  },
}
```



ì›¹íŒ© ì‹¤í–‰ì„ ìœ„í•œ npm ì»¤ìŠ¤í…€ ëª…ë ¹ì–´ë¥¼ ì¶”ê°€í•´ë³´ì.

> package.json
```json
{
  "scripts": {
    "build": "webpack"
  }
}
```
ëª¨ë“  ì˜µì…˜ì„ ì›¹íŒ© ì„¤ì •íŒŒì¼ë¡œ ì˜®ê²¼ìœ¼ë¯€ë¡œ, ì´ì œ `npm run build` ëª…ë ¹ì–´ë¥¼ í†µí•´ ê°„ë‹¨íˆ ì›¹íŒ© ì‘ì—…ì„ ì§€ì‹œí•  ìˆ˜ ìˆë‹¤.

### 2-3. Loader

#### 2-3-1. ë¡œë” ê¸°ë³¸ ê°œë…ê³¼ ì‚¬ìš©ë²•

ì›¹íŒ©ì€ ê¸°ë³¸ì ìœ¼ë¡œ ìë°”ìŠ¤í¬ë¦½íŠ¸ì™€ JSON ë§Œ ë¹Œë“œí•  ìˆ˜ ìˆë‹¤. ë¡œë”ëŠ” ì›¹íŒ©ì´ ìë°”ìŠ¤í¬ë¦½íŠ¸ íŒŒì¼ì´ ì•„ë‹Œ íŒŒì¼ë“¤ì„ë„ (CSS, ì´ë¯¸ì§€, í°íŠ¸ ë“±...) ì´í•´í•˜ê³  ëª¨ë“ˆë¡œ ê´€ë¦¬í•  ìˆ˜ ìˆê²Œ í•´ì¤€ë‹¤.

ë¡œë”ë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„ , í•„ìš”ì— ë§ëŠ” ë¡œë”ë¥¼ ì„¤ì¹˜í•œ í›„  `module` ê³¼ `rules` í‚¤ì›Œë“œë¥¼ ì‚¬ìš©í•´ ì›¹íŒ© ì„¤ì • íŒŒì¼ì— ì •ì˜í•˜ë©´ ëœë‹¤. ê¸°ë³¸ì ì¸ í‹€ì€ ì•„ë˜ì™€ ê°™ë‹¤.

> webpack.config.js

```js
module.exports = {
  (ìƒëµ)
  module: {
    rules: [
      {
        test: 'íŒŒì¼ëª… ë˜ëŠ” ê°€ì§€ê³ ì˜¬ íŒŒì¼ íŒ¨í„´ ì •ê·œì‹',
        use: ['ì‚¬ìš©í•  ë¡œë”ì˜ ì´ë¦„']
      }
    ]
  }
}
```

- testì—ëŠ” ë¡œë”ë¥¼ ì ìš©í•  íŒŒì¼ì„ ì§€ì •í•œë‹¤.
- useì—ëŠ” testì—ì„œ ì§€ì •í•œ íŒŒì¼ë“¤ì— ì ìš©í•  ë¡œë”ë¥¼ ì„¤ì •í•œë‹¤.

íŠ¹ì • íŒŒì¼ì— ëŒ€í•´ ì—¬ëŸ¬ ê°œì˜ ë¡œë”ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš°, ë°°ì—´ì— ì—¬ëŸ¬ê°œì˜ ë¡œë”ë¥¼ ë„£ì„ ìˆ˜ë„ ìˆëŠ”ë° ì´ ë•Œ ë¡œë”ê°€ **ì˜¤ë¥¸ìª½ì—ì„œ ì™¼ìª½ ìˆœìœ¼ë¡œ ì‚¬ìš©**ë¨ì„ ì£¼ì˜í•´ì•¼ í•œë‹¤.
```js
module: {
  rules: [
    {
      test: /\.scss$/,
      use: ['css-loader', 'sass-loader'] // sass ì „ì²˜ë¦¬ê¸° ì‚¬ìš© í›„ css ë¡œë” ì‚¬ìš©
    }
  ]
}
```
ë¡œë”ëŠ” ì•„ë˜ì™€ ê°™ì´ ì˜µì…˜ì„ í¬í•¨í•œ í˜•íƒœë¡œë„ ì…ë ¥í•  ìˆ˜ ìˆë‹¤
```js

module : {
	rules: {
		test: 'íŒŒì¼ëª… ë˜ëŠ” ê°€ì§€ê³ ì˜¬ íŒŒì¼ íŒ¨í„´ ì •ê·œì‹',
		use: [
			{
				loader: 'ì‚¬ìš©í•  ë¡œë” ì´ë¦„',
				options: { ì‚¬ìš©í•  ë¡œë” ì˜µì…˜ }
			}
		]
	}
}
```

#### 2-3-2. ì»¤ìŠ¤í…€ ë¡œë” ë§Œë“¤ê¸°

ë™ì‘ ì›ë¦¬ë¥¼ ì´í•´í•˜ê¸° ìœ„í•´ ì»¤ìŠ¤í…€ ë¡œë”ë¥¼ ë§Œë“¤ì–´ë³´ì.

ì¼ë‹¨ ì•„ë˜ì™€ ê°™ì´ ë””ë ‰í† ë¦¬ë¥¼ êµ¬ì„±í•œë‹¤.

<img src="README.assets/image-20200618171736384.png" alt="image-20200618171736384" style="zoom:50%;" />

math.jsì—ì„œëŠ” ê°„ë‹¨í•œ ë§ì…ˆ í•¨ìˆ˜ë¥¼ export í•˜ê³ , App.jsì—ì„œëŠ” ì´ math.jsë¥¼ import í•´ì˜¨ í›„ ë§ì…ˆ í•¨ìˆ˜ ì‹¤í–‰ì˜ ê²°ê³¼ë¥¼ ì½˜ì†”ì— ì°ëŠ”ë‹¤.

> math.js
```js
export const sum = (a, b) => a + b;
```

> App.js
```js
import * as math from "./math.js";

console.log(math.sum(1, 2));
```

> index.html
```html
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta http-equiv="X-UA-Compatible" content="ie=edge" />
        <title>Webpack React</title>
    </head>
    <body>
        <script type="module" src="App.js"></script>
    </body>
</html>
```
ì§€ê¸ˆ ìƒí™©ì—ì„œëŠ” ë°˜ë“œì‹œ **script íƒœê·¸ì— moduleì„ ì‚¬ìš©**í•´ì•¼ App.js ê°€ ES6 ëª¨ë“ˆ ì‹œìŠ¤í…œ(export, import)ì„ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.



ì»¤ìŠ¤í…€ ë¡œë”ëŠ” ì•„ë˜ì™€ ê°™ì´ ë§Œë“¤ ìˆ˜ ìˆë‹¤.

> myloader.js
```js
module.exports = function myloader (content) {
  console.log('myloader ë™ì‘')
  return content.replace('console.log(', 'alert(');
};
```
ë¡œë”ê°€ ì½ì€ íŒŒì¼ì˜ ë‚´ìš©ì´ contentë¡œ ì „ë‹¬ë˜ê³ , ë¡œë”ëŠ” ë¡œê·¸ë¥¼ ì°ì€ ë’¤ ì†ŒìŠ¤ì— ìˆëŠ” ëª¨ë“  console.logë¥¼ alert í•¨ìˆ˜ë¡œ ë³€ê²½í•´ ë¦¬í„´í•œë‹¤.

> webpack.config.js

```js
const path = require("path");

module.exports = {
  	(ìƒëµ)
    module: {
        rules: [
            {
                test: /\.js$/,
                use: [path.resolve("./src/myloader.js")],
            },
        ],
    },
};
```

ë§ˆì§€ë§‰ìœ¼ë¡œ, ì›¹íŒ© ì„¤ì •íŒŒì¼ì— ìœ„ì™€ ê°™ì´ `module` ê³¼ `rules`  í‚¤ì›Œë“œë¥¼ í†µí•´ ì»¤ìŠ¤í…€ ë¡œë”ë¥¼ ì„¤ì •í•´ì£¼ë©´ ë¡œë”ë¥¼ ì‚¬ìš©í•  ì¤€ë¹„ê°€ ëë‚œë‹¤.



ë¡œë”ë¥¼ ì ìš©í•˜ê¸° ì „, index.html ì„ ì‹¤í–‰í–ˆì„ë•ŒëŠ” App.js ë¥¼ ì‹¤í–‰í•˜ë¯€ë¡œ console.logì— ë§ì…ˆ í•¨ìˆ˜ ê²°ê³¼ê°€ ì°íŒë‹¤.

í•˜ì§€ë§Œ, ë¡œë”ë¥¼ ë§Œë“  í›„ ì•„ë˜ì™€ ê°™ì´ index.html ì—ì„œ ë¹Œë“œ ëœ ê²°ê³¼ì½”ë“œ(dist/main.js)ë¥¼ ì‹¤í–‰í•˜ê²Œë” í•˜ë©´

> index.html
```html
<script type="module" src="../dist/main.js"></script>
```
<img src="README.assets/image-20200618172942686.png" alt="image-20200618172942686" style="zoom:50%;" />

ë§Œë“¤ì—ˆë˜ ì»¤ìŠ¤í…€ ë¡œë”ë¡œ ì¸í•´ console.logê°€ ì•„ë‹ˆë¼ alert ë¡œ ë³€ê²½ëœ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.

#### 2-3-3. ìì£¼ ì‚¬ìš©í•˜ëŠ” ë¡œë” ì„¤ì •í•˜ê¸°

##### (1) css-loader + style-loader

CSSë¥¼ ë²ˆë“¤ë§í•˜ê¸° ìœ„í•´ì„œëŠ” css-loaderì™€ style-loaderë¥¼ í•¨ê»˜ ì‚¬ìš©í•´ì•¼ í•œë‹¤.

**css-loader**ì„ ì‚¬ìš©í•˜ë©´, CSSë¥¼ ëª¨ë“ˆë¡œ ë³€í™˜í•´ import êµ¬ë¬¸ì„ ì‚¬ìš©í•´ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ìˆê²Œ í•´ì¤€ë‹¤.

```shell
$ npm install -D css-loader
```

ë¨¼ì € ë¡œë”ë¥¼ ì„¤ì¹˜í•œ ë’¤,

> webpack.config.js
```js
module.exports = {
  (ìƒëµ)
  module: {
    rules: [{
      test: /\.css$/, // .css í™•ì¥ìë¡œ ëë‚˜ëŠ” ëª¨ë“  íŒŒì¼ì—
      use: ['css-loader'], // css-loaderë¥¼ ì ìš© (ë¡œë” ì´ë¦„ì„ ë¬¸ìì—´ë¡œ ì „ë‹¬í•´ë„ ë¨) 
    }]
  }
}
```
webpack ì„¤ì •ì— css-loader ì„ ì¶”ê°€í•´ì¤€ë‹¤.

ì´ë ‡ê²Œ ì„¤ì •í•˜ê³  ë‚˜ë©´, ì›¹íŒ©ì€ entry pointì—ì„œ ì‹œì‘í•´ì„œ ëª¨ë“ˆì„ ê²€ìƒ‰í•˜ë‹¤ê°€ css íŒŒì¼ì„ ì°¾ìœ¼ë©´ css-loaderë¡œ ì²˜ë¦¬í•  ê²ƒì´ë‹¤.

ê·¸ëŸ°ë° CSSëŠ” ëª¨ë“ˆë¡œ ë³€ê²½í•œë‹¤ê³  (= ìë°”ìŠ¤í¬ë¦½íŠ¸ ì½”ë“œë¡œ ë³€ê²½ëœë‹¤ê³ ) ëë‚˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼, DOMì— ì¶”ê°€ë˜ì–´ì•¼ í•œë‹¤. ì´ë¥¼ ìœ„í•´ì„œ ìë°”ìŠ¤í¬ë¦½íŠ¸ë¡œ ë³€ê²½ëœ CSSë¥¼ ë™ì ìœ¼ë¡œ DOMì— ì¶”ê°€í•´ì£¼ëŠ” **style-loader**ì„ ì‚¬ìš©í•´ì•¼ í•œë‹¤.

css-loaderê³¼ ë™ì¼í•˜ê²Œ style-loaderì„ ì„¤ì¹˜í•œ ë’¤,

```shell
$ npm install -D style-loader
```

> webpack.config.js

```js
module.exports = {
  (ìƒëµ)
  module: {
    rules: [{
      test: /\.css$/,
      use: ['style-loader','css-loader'],
    }]
  }
}
```

webpack ì„¤ì •ì— style-loader ì„ ì¶”ê°€í•´ì¤€ë‹¤. ì´ ë•Œ ë°°ì—´ë¡œ ì„¤ì •í•˜ë©´ **ë’¤ì—ì„œë¶€í„° ì•ìœ¼ë¡œ** ë¡œë”ê°€ ë™ì‘í•˜ë¯€ë¡œ, ëª¨ë“  .css í™•ì¥ìë¡œ ëë‚˜ëŠ” ëª¨ë“ˆì„ ì½ì–´ë“¤ì—¬ css-loaderì„ ì ìš©í•˜ê³ , ê·¸ ë‹¤ìŒ style-loaderì„ ì ìš©í•œë‹¤.

style-loaderê¹Œì§€ ì ìš©í•œ ë’¤ ì•„ë˜ì²˜ëŸ¼ ê°„ë‹¨í•œ css íŒŒì¼ì„ App.jsì— import í•´ì£¼ë©´

<img src="README.assets/image-20200618185118117.png" alt="image-20200618185118117" style="zoom: 33%;" />

import í•œ CSS íŒŒì¼ì´ ì„±ê³µì ìœ¼ë¡œ ëª¨ë“ˆë¡œ ì˜ ì¸ì‹ë˜ì–´ ì ìš©ëœ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤. 

##### (2) file-loader

file-loader ì„ í†µí•´ png, svg ë“±ì˜ ì´ë¯¸ì§€ë¥¼ ë²ˆë“¤ë§ (ì›¹íŒ© ì•„ì›ƒí’‹ìœ¼ë¡œ ì˜®ê¸¸) í•  ìˆ˜ ìˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, CSSì—ì„œ url() í•¨ìˆ˜ì— ì´ë¯¸ì§€ íŒŒì¼ ê²½ë¡œë¥¼ ì§€ì •í•˜ë©´, ì›¹íŒ©ì€ í•´ë‹¹ ì´ë¯¸ì§€ íŒŒì¼ì„ ë§Œë‚¬ì„ ë•Œ file-loaderì„ ì‹¤í–‰ì‹œì¼œ ì•„ì›ƒí’‹ì— ì„¤ì •í•œ ê²½ë¡œë¡œ ì´ë¯¸ì§€ íŒŒì¼ì„ ë³µì‚¬í•  ê²ƒì´ë‹¤.

ì ë‹¹íˆ asset í´ë”ì— pngë¥¼ í•˜ë‚˜ ë„£ì–´ì£¼ê³ , cssì—ì„œ ê·¸ ì´ë¯¸ì§€ íŒŒì¼ì„ ì‚¬ìš©í•´ë³´ì.

![image-20200618195820528](README.assets/image-20200618195820528.png)

ì´í›„ file-loader ì„ ì„¤ì¹˜ ë° ì„¤ì •í•´ì¤€ë‹¤.
```shell
$ npm install -D file-loader
```

> webpack.config.js

```js
module.exports = {
  (ìƒëµ)
  module: {
    rules: [{
      test: /\.png$/,
      loader: 'file-loader',
    }]
  }
}
```

ê·¸ëŸ°ë°, ì´ëŒ€ë¡œ ë¹Œë“œë¥¼ í•˜ë©´ ì´ë¯¸ì§€ë¥¼ ì œëŒ€ë¡œ ë¡œë”©í•˜ì§€ ëª»í•œë‹¤. ê·¸ ì´ìœ ëŠ”, pngë¥¼ ì‚¬ìš©í•˜ëŠ” ì¸¡ì—ì„œ `../assets/wallpaper.png` ë¡œ íŒŒì¼ì„ ìš”ì²­í•˜ëŠ”ë° ì›¹íŒ©ìœ¼ë¡œ ë¹Œë“œí•œ ì´ë¯¸ì§€ íŒŒì¼ì€ outputì¸ dist í´ë”ë¡œ ì´ë™í–ˆê¸° ë•Œë¬¸ì´ë‹¤.

ë”°ë¼ì„œ ì˜µì…˜ì„ ì¡°ì •í•´ **ê²½ë¡œë¥¼ ë°”ë¡œì¡ì•„ì¤˜ì•¼ í•œë‹¤**.

> webpack.config.js

```js
module.exports = {
  (ìƒëµ)
  module: {
    rules: [{
      test: /\.png$/,
      loader: 'file-loader',
      options: {
        publicPath: './dist/', // prefixë¥¼ ì•„ì›ƒí’‹ ê²½ë¡œë¡œ ì§€ì • 
        name: '[name].[ext]?[hash]', // íŒŒì¼ëª… í˜•ì‹ 
      }
    }]
  }
}
```
**publicPath** ì˜µì…˜ì„ í†µí•´ file-loaderì´ ì²˜ë¦¬í•˜ëŠ” íŒŒì¼ì„ ëª¨ë“ˆë¡œ ì‚¬ìš©í•  ë•Œ **ê²½ë¡œ ì•ì— ì¶”ê°€ë  ë¬¸ìì—´ì„ ì„¤ì •**í•  ìˆ˜ ìˆë‹¤. publicPathë¥¼  `./dist` ë¡œ ì„¤ì •í•´ ìƒˆë¡­ê²Œ ì˜®ê²¨ì§„ íŒŒì¼ ê²½ë¡œë¡œ ìˆ˜ì •í•´ì£¼ì.

ë˜í•œ, **name** ì˜µì…˜ì„ í†µí•´ ë¡œë”ê°€ íŒŒì¼ì„ outputì— ë³µì‚¬í•  ë•Œ ì‚¬ìš©í•  íŒŒì¼ ì´ë¦„ì„ ì„¤ì •í•  ìˆ˜ ìˆë‹¤. ê¸°ë³¸ì ìœ¼ë¡œ ì„¤ì •ëœ í•´ì‰¬ê°’ì„ ì¿¼ë¦¬ìŠ¤íŠ¸ë§ìœ¼ë¡œ ì˜®ê²¨ íŒŒì¼ì„ ìš”ì²­í•˜ë„ë¡ ë³€ê²½í•˜ì.

ì´ë ‡ê²Œ ì„¤ì •í•´ì£¼ê³  ë‚˜ë©´, cssì—ì„œ ë¶ˆëŸ¬ì˜¨ íŒŒì¼ì´ ì •ìƒì ìœ¼ë¡œ ë™ì‘í•˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.

##### (3) url-loader

ì‚¬ìš©í•˜ëŠ” ì´ë¯¸ì§€ ê°¯ìˆ˜ê°€ ë§ë‹¤ë©´, ë„¤íŠ¸ì›Œí¬ ë¦¬ì†ŒìŠ¤ì— ë¶€ë‹´ì„ ì¤˜ ì„±ëŠ¥ì— ì˜í–¥ì„ ì¤„ ìˆ˜ ìˆë‹¤. í•œ í˜ì´ì§€ì—ì„œ ì‘ì€ ì´ë¯¸ì§€(ì•„ì´ì½˜ ë“±)ë¥¼ ì—¬ëŸ¬ê°œ ì‚¬ìš©í•œë‹¤ë©´, ì´ë¯¸ì§€ë¥¼ Base64ë¡œ ì¸ì½”ë”©í•˜ì—¬ ë¬¸ìì—´ í˜•íƒœë¡œ ì†ŒìŠ¤ì½”ë“œì— ë„£ëŠ” í˜•ì‹ì´ ë” ë‚˜ì„ ìˆ˜ë„ ìˆë‹¤. [ì°¸ê³  ë§í¬ : Data URIs](https://developer.mozilla.org/ko/docs/Web/HTTP/Basics_of_HTTP/Data_URIs)

url-loaderì€ ì´ëŸ° ì²˜ë¦¬ë¥¼ ìë™í™”í•´ì¤€ë‹¤. ì´ì „ loaderë“¤ê³¼ ë§ˆì°¬ê°€ì§€ë¡œ, ì„¤ì¹˜ì™€ ì›¹íŒ© ì„¤ì •ì„ í•´ë³´ì.

```shell
$ npm install -D url-loader
```

> webpack.config.js

```js
{
  test: /\.(png|jpg|gif)$/i,
    use: [
      {
        loader: 'url-loader',
        options: {
          publicPath: './dist/', 
          name: '[name].[ext]?[hash]', 
          limit: 5000 // 5kb ë¯¸ë§Œ íŒŒì¼ë§Œ data urlë¡œ ì²˜ë¦¬ 
        },
      },
    ],
},
```

âš ï¸ ì•ì„œ ì„¤ì •í–ˆë˜ file-loader ëŒ€ì‹  url-loader ë¡œ **ë³€ê²½**í•´ì£¼ëŠ” ê²ƒì„.

url-loaderì˜ ì„¤ì •ì€ file-loaderê³¼ ê±°ì˜ ìœ ì‚¬í•˜ë‹¤. ë§ˆì§€ë§‰ limit ì†ì„±ë§Œ ë‹¤ë¥¸ë°, ì´ëŠ” ëª¨ë“ˆë¡œ ì‚¬ìš©í•œ íŒŒì¼ ì¤‘ í¬ê¸°ê°€ 5kb ë¯¸ë§Œì¸ íŒŒì¼ë§Œ url-loaderì„ ì ìš©í•œë‹¤. 5kb ì´ìƒì¸ íŒŒì¼ì€ fallback ê¸°ë³¸ê°’ìœ¼ë¡œ file-loaderì´ ì²˜ë¦¬í•œë‹¤.

<img src="README.assets/image-20200618212342119.png" alt="image-20200618212342119" style="zoom: 33%;" />

ë¹Œë“œ ê²°ê³¼ë¥¼ ë³´ë©´, limit ì‚¬ì´ì¦ˆë¥¼ ì´ˆê³¼í•˜ëŠ” wallpaper.pngëŠ” íŒŒì¼ë¡œ ì¡´ì¬í•˜ê³ ,

<img src="README.assets/image-20200618212502489.png" alt="image-20200618212502489" style="zoom: 50%;" />

limit ì‚¬ì´ì¦ˆë³´ë‹¤ ì‘ì€ faviconì€ dist íŒŒì¼ì— ì¡´ì¬í•˜ì§€ ì•Šê³  data url í˜•íƒœë¡œ ë³€í™˜ëœ ê²ƒì„ ë³¼ ìˆ˜ ìˆë‹¤.



### 2-4. Plugin

#### 2-4-1. í”ŒëŸ¬ê·¸ì¸ ê¸°ë³¸ ê°œë…ê³¼ ì‚¬ìš©ë²•

ì•ì„œ ì•Œì•„ë³¸ ë¡œë”ê°€ íŒŒì¼ì„ í•´ì„í•˜ê³  ë³€í™˜í•˜ëŠ” ê³¼ì •ì— ê´€ì—¬í–ˆë‹¤ë©´ (íŒŒì¼ ë‹¨ìœ„), í”ŒëŸ¬ê·¸ì¸ì€ ì›¹íŒ©ì„ í†µí•´ **ë²ˆë“¤ëœ ê²°ê³¼ë¬¼**ì˜ í˜•íƒœë¥¼ ë°”ê¾¸ëŠ” ê³¼ì •ì— ê´€ì—¬í•œë‹¤. ì˜ˆë¥¼ ë“¤ë©´, ë²ˆë“¤ëœ JSë¥¼ ë‚œë…í™”í•˜ê±°ë‚˜ íŠ¹ì • í…ìŠ¤íŠ¸ë¥¼ ì¶”ì¶œí•˜ëŠ” ìš©ë„ë¡œ ì‚¬ìš©í•œë‹¤.

í”ŒëŸ¬ê·¸ì¸ì€ ì•„ë˜ì™€ ê°™ì´ `plugins` í‚¤ì›Œë“œë¥¼ í†µí•´ ì„ ì–¸í•˜ë©°, í”ŒëŸ¬ê·¸ì¸ì˜ ë°°ì—´ì—ëŠ” **ìƒì„±ì í•¨ìˆ˜ë¡œ ìƒì„±í•œ ê°ì²´ ì¸ìŠ¤í„´ìŠ¤ë§Œ ì¶”ê°€**í•  ìˆ˜ ìˆë‹¤.

> webpack.config.js

```js
var HtmlWebpackPlugin = require('html-webpack-plugin');

module.exports = {
  plugins: [
    new HtmlWebpackPlugin(),
    new webpack.ProgressPlugin()
  ]
}
```

#### 2-4-2. ì»¤ìŠ¤í…€ í”ŒëŸ¬ê·¸ì¸ ë§Œë“¤ê¸°

ë™ì‘ ì›ë¦¬ë¥¼ ì´í•´í•˜ê¸° ìœ„í•´ ì»¤ìŠ¤í…€ í”ŒëŸ¬ê·¸ì¸ì„ ë§Œë“¤ì–´ë³´ì. [ì°¸ê³  ë§í¬ - ì›¹íŒ© ê³µì‹ ë¬¸ì„œ Writing a Plugin](https://webpack.js.org/contribute/writing-a-plugin/)

í•¨ìˆ˜ë¡œ ë§Œë“¤ì—ˆë˜ ë¡œë”ì™€ ë‹¤ë¥´ê²Œ, í”ŒëŸ¬ê·¸ì¸ì€ **í´ë˜ìŠ¤**ë¡œ ë§Œë“¤ê³  **apply ë©”ì„œë“œ**ë¥¼ êµ¬í˜„í•´ì•¼ í•œë‹¤. (í•¨ìˆ˜ë¡œ ë§Œë“¤ê³  prototypeì— ì„¤ì •í•´ì£¼ëŠ” ê²ƒë„ ê°€ëŠ¥í•œ ê²ƒ ê°™ë‹¤.) 

> myplugin.js
```js
class MyPlugin {
    apply(compiler) {
        compiler.hooks.done.tap("MyPlugin", (stats) => {
            console.log("MyPlugin ì‹¤í–‰");
        });
        compiler.hooks.emit.tap("MyPlugin", (compilation) => {
            // ë²ˆë“¤ë§ ëœ ê²°ê³¼ë¬¼ì„ source ë³€ìˆ˜ì— ì €ì¥í•œë‹¤
            const source = compilation.assets["main.js"].source();
            // ë²ˆë“¤ ì†ŒìŠ¤ë¥¼ ì–»ì–´ì˜¤ëŠ” í•¨ìˆ˜ë¥¼ ì¬ì •ì˜í•œë‹¤
            compilation.assets["main.js"].source = () => {
                const banner = [
                    "/**",
                    " * ì´ê²ƒì€ MyPluginì´ ì²˜ë¦¬í•œ ê²°ê³¼ì…ë‹ˆë‹¤.",
                    ` * Build Date: ${Date.now()}`,
                    " */",
                    "",
                ].join("\n");
                return banner + "\n" + source;
            };
            console.log(source);
        });
    }
}

module.exports = MyPlugin;

```
apply ë©”ì„œë“œëŠ” ì›¹íŒ© ì»´íŒŒì¼ëŸ¬ê°€ í”ŒëŸ¬ê·¸ì¸ì„ ì„¤ì¹˜í•  ë•Œ í•œë²ˆ ì‹¤í–‰ëœë‹¤. apply ë©”ì„œë“œëŠ” ì›¹íŒ© ì»´íŒŒì¼ëŸ¬ì— ëŒ€í•œ ì°¸ì¡°ê°’ì„  `compiler` ì¸ìë¡œ ë°›ì•„, ì½œë°± í•¨ìˆ˜ì˜ ì‹¤í–‰ì„ ë³´ì¥í•œë‹¤. ìì„¸í•œ ë‚´ìš©ì€ [ì›¹íŒ© ê³µì‹ë¬¸ì„œ - Compiler hooks](https://webpack.js.org/api/compiler-hooks/) ë¥¼ ì°¸ê³ í•˜ì.

ìœ„ ì˜ˆì œì˜ ê²½ìš° ì›¹íŒ© ì»´íŒŒì¼ëŸ¬ì˜ done hookì´ tapped ë˜ì—ˆì„ ë•Œ ë¡œê·¸ë¥¼ ì°ê³ , ë°°ë„ˆë¥¼ ì¶”ê°€í•œë‹¤.

> webpack.config.js
```js
const MyPlugin = require('./myplugin');

module.exports = {
  (ìƒëµ)
  plugins: [
    new MyPlugin(),
  ]
}
```

![image-20200618221251268](README.assets/image-20200618221251268.png)

ë¹Œë“œí•œ í›„ ê²°ê³¼ë¬¼ì„ í™•ì¸í•´ë³´ë©´ ìœ„ì™€ ê°™ì´ ë²ˆë“¤ ê²°ê³¼ë¬¼ì— ë°°ë„ˆê°€ ì¶”ê°€ëœ ê²ƒì„ ë³¼ ìˆ˜ ìˆë‹¤.

#### 2-4-3. ìì£¼ ì‚¬ìš©í•˜ëŠ” í”ŒëŸ¬ê·¸ì¸ ì„¤ì •í•˜ê¸°

##### (1) BannerPlugin

ìœ„ì—ì„œ ì„¤ì •í•´ë³¸ ì»¤ìŠ¤í…€ í”ŒëŸ¬ê·¸ì¸ê³¼ ìœ ì‚¬í•œ ê²ƒì´ BannerPlugin ì´ë‹¤. ë¹Œë“œ ê²°ê³¼ì— ì—¬ëŸ¬ ì •ë³´ë¥¼ ì¶”ê°€í•  ìˆ˜ ìˆë‹¤.

í”ŒëŸ¬ê·¸ì¸ ìƒì„±ì í•¨ìˆ˜ì— ì „ë‹¬í•˜ëŠ” ê°ì²´ì˜ banner ì†ì„± ê°’ìœ¼ë¡œ ë¬¸ìì—´ì„ ì „ë‹¬í•˜ê±°ë‚˜, ì›¹íŒ© ì»´íŒŒì¼ íƒ€ì„ì— ì–»ì„ ìˆ˜ ìˆëŠ” ì •ë³´ (ex. ë¹Œë“œ ì‹œê°„) ë¥¼ ì „ë‹¬í•˜ê¸° ìœ„í•´ í•¨ìˆ˜ë¡œ ì „ë‹¬í•  ìˆ˜ë„ ìˆë‹¤.

> webpack.config.js

```js
const webpack = require('webpack');

module.exports = {
  plugins: [
    new webpack.BannerPlugin({
      // banner: 'ë°°ë„ˆì…ë‹ˆë‹¤',
      banner: () => `ë¹Œë“œ ë‚ ì§œ: ${new Date().toLocaleString()}`
    })
  ]
```

ë°°ë„ˆ ì •ë³´ê°€ ë§ì„ ì‹œ, ë³„ë„ íŒŒì¼ë¡œ ë¶„ë¦¬í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤.

> banner.js
```js
const childProcess = require('child_process');

module.exports = function banner() {
  const commit = childProcess.execSync('git rev-parse --short HEAD')
  const user = childProcess.execSync('git config user.name')
  const date = new Date().toLocaleString();
  
  return (
    `commitVersion: ${commit}` +
    `Build Date: ${date}\n` +
    `Author: ${user}`
  );
}
```

bannerì •ë³´ë¥¼ ë³„ë„ì˜ íŒŒì¼ë¡œ ë¶„ë¦¬í•˜ì—¬ ë¹Œë“œ ë‚ ì§œì™€ ì»¤ë°‹ í•´ì‰¬, ë¹Œë“œí•œ ìœ ì € ì •ë³´ê¹Œì§€ ì¶”ê°€í–ˆë‹¤. childProcess ëª¨ë“ˆì— ëŒ€í•œ ë‚´ìš©ì€ [ë§í¬](https://mylko72.gitbooks.io/node-js/content/chapter9/chapter9_2.html) ë¥¼ ì°¸ê³ í•˜ì.

> webpack.config.js

```js
const path = require("path");
const webpack = require("webpack");
const banner = require("./banner.js");

module.exports = {
  	(ìƒëµ)
    plugins: [new webpack.BannerPlugin(banner)],
};

```

ë¹Œë“œí•œ ë’¤ ê²°ê³¼ë¬¼ì€ ì•„ë˜ì™€ ê°™ë‹¤.

<img src="README.assets/image-20200618223503934.png" alt="image-20200618223503934" style="zoom:33%;" />



---

### References

[Webpackê³¼ Babelì„ ì´ìš©í•œ React ê°œë°œ í™˜ê²½ êµ¬ì„±í•˜ê¸°](https://medium.com/wasd/ì›¹íŒ©-webpack-ê³¼-ë°”ë²¨-babel-ì„-ì´ìš©í•œ-react-ê°œë°œ-í™˜ê²½-êµ¬ì„±í•˜ê¸°-fb87d0027766)

[React ê°œë°œ í™˜ê²½ì„ êµ¬ì¶•í•˜ë©´ì„œ ë°°ìš°ëŠ” ì›¹íŒ©(Webpack) ê¸°ì´ˆ](https://velog.io/@jeff0720/React-ê°œë°œ-í™˜ê²½ì„-êµ¬ì¶•í•˜ë©´ì„œ-ë°°ìš°ëŠ”-Webpack-ê¸°ì´ˆ))

[í”„ë¡ íŠ¸ì—”ë“œ ê°œë°œí™˜ê²½ì˜ ì´í•´](http://jeonghwan-kim.github.io/series/2020/01/02/frontend-dev-env-webpack-intermediate.html)

[ì›¹íŒ© í•¸ë“œë¶](https://joshua1988.github.io/webpack-guide/)

