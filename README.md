<div align="center">
  <h1>webpack-react ğŸ‘‹</h1>
<p>CRA ì—†ì´ ë§Œë“¤ì–´ë³´ë©° React ê°œë°œí™˜ê²½ ì´í•´í•˜ê¸°</p>
  <p>
    ì°¸ê³  íŠœí† ë¦¬ì–¼: ê¹€ì •í™˜ ë‹˜ì˜ <a href="https://github.com/jeonghwan-kim/lecture-frontend-dev-env/tree/1-webpack/3-plugin">í”„ë¡ íŠ¸ì—”ë“œ ê°œë°œ í™˜ê²½ì˜ ì´í•´</a>
  </p>
</div>



## 1. í”„ë¡œì íŠ¸ ì´ˆê¸° ì„¤ì •

ì›¹íŒ©ê³¼ ë¦¬ì•¡íŠ¸ë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ í•„ìš”í•œ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì„¤ì¹˜í•´ë³´ì.

```shell
$ npm init -y
```

ìœ„ ëª…ë ¹ì–´ë¡œ ê°œë°œ í”„ë¡œì íŠ¸ë¥¼ ìƒì„±í•  ìˆ˜ ìˆë‹¤.

íŒ¨í‚¤ì§€ ì´ë¦„, ë²„ì „ ë“± í”„ë¡œì íŠ¸ì™€ ê´€ë ¨ëœ ì •ë³´ë“¤ì„ ë‹µë³€í•˜ê±°ë‚˜, ë¹ˆì¹¸ìœ¼ë¡œ ë‘ì–´ ê¸°ë³¸ê°’ì„ ì…ë ¥í•  ìˆ˜ ìˆë‹¤. ëª¨ë‘ ê¸°ë³¸ê°’ì„ ì‚¬ìš©í•  ê²ƒì´ë¼ë©´ `-y` í”Œë˜ê·¸ë¥¼ ë¶™ì—¬ ì§ˆë¬¸ì„ ìŠ¤í‚µí•˜ê³  **package.json** íŒŒì¼ì„ ìƒì„±í•  ìˆ˜ ìˆë‹¤.



## 2. Webpack ì„¤ì •

### 2-1. Webpack ì´ë€?

ì›¹íŒ©ì€ ì—¬ëŸ¬ê°œì˜ íŒŒì¼ì„ í•˜ë‚˜ë¡œ í•©ì³ì£¼ëŠ” **ëª¨ë“ˆ ë²ˆë“¤ëŸ¬**ì´ë‹¤. í•˜ë‚˜ì˜ ì‹œì‘ì  (entry point) ìœ¼ë¡œë¶€í„° ì˜ì¡´ì ì¸ ëª¨ë“ˆì„ ì „ë¶€ ì°¾ì•„ë‚´ í•˜ë‚˜ì˜ ê²°ê³¼ë¬¼ì„ ë§Œë“¤ì–´ë‚¸ë‹¤.

webpack íŒ¨í‚¤ì§€ì™€ ì›¹íŒ© ì»¤ë§¨ë“œ ë¼ì¸ ì¸í„°í˜ì´ìŠ¤ì¸ webpack-cli ë¥¼ ì„¤ì¹˜í•˜ì.

```shell
$ npm install -D webpack webpack-cli
```

`-D`  í”Œë˜ê·¸ëŠ” ê°œë°œ ë‹¨ê³„ì—ì„œë§Œ ì‚¬ìš©í•˜ê¸°ì— devDependencies ì— ì¶”ê°€í•¨ì„ ì˜ë¯¸í•œë‹¤.

### 2-2. Webpack ì„¤ì •í•˜ê¸°

Webpackì—ì„œ 3ê°€ì§€ ì˜µì…˜ë§Œ ì‚¬ìš©í•˜ë©´ ì½”ë“œë¥¼ ë²ˆë“¤ë§ í•  ìˆ˜ ìˆë‹¤.

- `--mode` : ì›¹íŒ© ì‹¤í–‰ ëª¨ë“œë¥¼ ì§€ì •í•œë‹¤. productionì€ ìµœì í™”ë˜ì–´ ë¹Œë“œë˜ëŠ” íŠ¹ì§•ì´, developmentëŠ” (ìµœì í™” ì—†ì´) ë¹ ë¥´ê²Œ ë¹Œë“œë˜ëŠ” íŠ¹ì§•ì´ ìˆë‹¤.
- `--entry` : ì–´í”Œë¦¬ì¼€ì´ì…˜ ì§„ì…ì  ê²½ë¡œë¥¼ ì§€ì •í•œë‹¤. entryì— ëª…ì‹œí•œ íŒŒì¼ ê¸°ì¤€ìœ¼ë¡œ ëª¨ë“  dependencyë¥¼ ì°¾ì•„ í•˜ë‚˜ì˜ íŒŒì¼ë¡œ í•©ì¹˜ê²Œ ëœë‹¤
- `--output` : ì›¹íŒ©ì—ì„œ ë¹Œë“œë¥¼ ì™„ë£Œí•˜ë©´ outputì— ìˆëŠ” ì •ë³´ë¥¼ í†µí•´ ë¹Œë“œ íŒŒì¼ì„ ìƒì„±í•œë‹¤



ê°œë°œí•  ë•Œë§ˆë‹¤ í„°ë¯¸ë„ì— `--mode`, `--entry`, `--output` ì˜µì…˜ì„ ì‚¬ìš©í•´ ë²ˆë“¤ë§ í•  ìˆ˜ë„ ìˆì§€ë§Œ, ì›¹íŒ© ì„¤ì •íŒŒì¼ì¸ **webpack.config.json** ì— ì˜µì…˜ì„ ì‘ì„±í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤.

> webpack.config.js

```js
const path = require('path');

module.exports = {
  mode: 'development',
  entry: {
    main: './src/app.js'
  },
  output: {
    // [name] ì—ëŠ” entryì— ì¶”ê°€í•œ mainì´ ë¬¸ìì—´ë¡œ ë“¤ì–´ê°„ë‹¤
    filename: '[name].js',
    //ì ˆëŒ€ ê²½ë¡œë¥¼ ì‚¬ìš©í•˜ë¯€ë¡œ ë…¸ë“œ ì½”ì–´ ëª¨ë“ˆì¸ pathì˜ resolve() í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•´ ê³„ì‚°í•œë‹¤
    path: path.resolve('./dist'),
  },
}
```



ì›¹íŒ© ì‹¤í–‰ì„ ìœ„í•œ npm ì»¤ìŠ¤í…€ ëª…ë ¹ì–´ë¥¼ ì¶”ê°€í•´ë³´ì.

> package.json
```json
{
  "scripts": {
    "build": "webpack"
  }
}
```
ëª¨ë“  ì˜µì…˜ì„ ì›¹íŒ© ì„¤ì •íŒŒì¼ë¡œ ì˜®ê²¼ìœ¼ë¯€ë¡œ, ì´ì œ `npm run build` ëª…ë ¹ì–´ë¥¼ í†µí•´ ê°„ë‹¨íˆ ì›¹íŒ© ì‘ì—…ì„ ì§€ì‹œí•  ìˆ˜ ìˆë‹¤.

### 2-3. Loader

ì›¹íŒ©ì€ ê¸°ë³¸ì ìœ¼ë¡œ ìë°”ìŠ¤í¬ë¦½íŠ¸ì™€ JSON ë§Œ ë¹Œë“œí•  ìˆ˜ ìˆë‹¤. ë¡œë”ëŠ” ì›¹íŒ©ì´ ìë°”ìŠ¤í¬ë¦½íŠ¸ íŒŒì¼ì´ ì•„ë‹Œ íŒŒì¼ë“¤ì„ë„ (CSS, ì´ë¯¸ì§€, í°íŠ¸ ë“±...) ì´í•´í•˜ê³  ëª¨ë“ˆë¡œ ê´€ë¦¬í•  ìˆ˜ ìˆê²Œ í•´ì¤€ë‹¤.

ë¡œë”ë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„ , í•„ìš”ì— ë§ëŠ” ë¡œë”ë¥¼ ì„¤ì¹˜í•œ í›„  `module` ê³¼ `rules` í‚¤ì›Œë“œë¥¼ ì‚¬ìš©í•´ ì›¹íŒ© ì„¤ì • íŒŒì¼ì— ì •ì˜í•˜ë©´ ëœë‹¤. ê¸°ë³¸ì ì¸ í‹€ì€ ì•„ë˜ì™€ ê°™ë‹¤.

> webpack.config.js

```js
module : {
	rules: {
		test: 'íŒŒì¼ëª… ë˜ëŠ” ê°€ì§€ê³ ì˜¬ íŒŒì¼ íŒ¨í„´ ì •ê·œì‹',
		use: [
			{
				loader: 'ì‚¬ìš©í•  ë¡œë” ì´ë¦„',
				options: { ì‚¬ìš©í•  ë¡œë” ì˜µì…˜ }
			}
		]
	}
}
```

- testì—ëŠ” ë¡œë”ë¥¼ ì ìš©í•  íŒŒì¼ì„ ì§€ì •í•œë‹¤.
- useì—ëŠ” testì—ì„œ ì§€ì •í•œ íŒŒì¼ë“¤ì— ì ìš©í•  ë¡œë”ë¥¼ ì„¤ì •í•œë‹¤.

#### 2.3.1. ì»¤ìŠ¤í…€ ë¡œë” ë§Œë“¤ê¸°

ë™ì‘ ì›ë¦¬ë¥¼ ì´í•´í•˜ê¸° ìœ„í•´ ì»¤ìŠ¤í…€ ë¡œë”ë¥¼ ë§Œë“¤ì–´ë³´ì.

ì¼ë‹¨ ì•„ë˜ì™€ ê°™ì´ ë””ë ‰í† ë¦¬ë¥¼ êµ¬ì„±í•œë‹¤.

<img src="README.assets/image-20200618171736384.png" alt="image-20200618171736384" style="zoom:50%;" />

math.jsì—ì„œëŠ” ê°„ë‹¨í•œ ë§ì…ˆ í•¨ìˆ˜ë¥¼ export í•˜ê³ , App.jsì—ì„œëŠ” ì´ math.jsë¥¼ import í•´ì˜¨ í›„ ë§ì…ˆ í•¨ìˆ˜ ì‹¤í–‰ì˜ ê²°ê³¼ë¥¼ ì½˜ì†”ì— ì°ëŠ”ë‹¤.

> math.js
```js
export const sum = (a, b) => a + b;
```

> App.js
```js
import * as math from "./math.js";

console.log(math.sum(1, 2));
```

> index.html
```html
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta http-equiv="X-UA-Compatible" content="ie=edge" />
        <title>Webpack React</title>
    </head>
    <body>
        <script type="module" src="App.js"></script>
    </body>
</html>
```
ì§€ê¸ˆ ìƒí™©ì—ì„œëŠ” ë°˜ë“œì‹œ **script íƒœê·¸ì— moduleì„ ì‚¬ìš©**í•´ì•¼ App.js ê°€ ES6 ëª¨ë“ˆ ì‹œìŠ¤í…œ(export, import)ì„ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.



ì»¤ìŠ¤í…€ ë¡œë”ëŠ” ì•„ë˜ì™€ ê°™ì´ ë§Œë“¤ ìˆ˜ ìˆë‹¤.

> myloader.js
```js
module.exports = function myloader (content) {
  console.log('myloader ë™ì‘')
  return content.replace('console.log(', 'alert(');
};
```
ë¡œë”ê°€ ì½ì€ íŒŒì¼ì˜ ë‚´ìš©ì´ contentë¡œ ì „ë‹¬ë˜ê³ , ë¡œë”ëŠ” ë¡œê·¸ë¥¼ ì°ì€ ë’¤ ì†ŒìŠ¤ì— ìˆëŠ” ëª¨ë“  console.logë¥¼ alert í•¨ìˆ˜ë¡œ ë³€ê²½í•´ ë¦¬í„´í•œë‹¤.

> webpack.config.js

```js
const path = require("path");

module.exports = {
  	(ìƒëµ)
    module: {
        rules: [
            {
                test: /\.js$/,
                use: [path.resolve("./src/myloader.js")],
            },
        ],
    },
};
```

ë§ˆì§€ë§‰ìœ¼ë¡œ, ì›¹íŒ© ì„¤ì •íŒŒì¼ì— ìœ„ì™€ ê°™ì´ `module` ê³¼ `rules`  í‚¤ì›Œë“œë¥¼ í†µí•´ ì»¤ìŠ¤í…€ ë¡œë”ë¥¼ ì„¤ì •í•´ì£¼ë©´ ë¡œë”ë¥¼ ì‚¬ìš©í•  ì¤€ë¹„ê°€ ëë‚œë‹¤.



ë¡œë”ë¥¼ ì ìš©í•˜ê¸° ì „, index.html ì„ ì‹¤í–‰í–ˆì„ë•ŒëŠ” App.js ë¥¼ ì‹¤í–‰í•˜ë¯€ë¡œ console.logì— ë§ì…ˆ í•¨ìˆ˜ ê²°ê³¼ê°€ ì°íŒë‹¤.

í•˜ì§€ë§Œ, ë¡œë”ë¥¼ ë§Œë“  í›„ ì•„ë˜ì™€ ê°™ì´ index.html ì—ì„œ ë¹Œë“œ ëœ ê²°ê³¼ì½”ë“œ(dist/main.js)ë¥¼ ì‹¤í–‰í•˜ê²Œë” í•˜ë©´

> index.html
```html
<script type="module" src="../dist/main.js"></script>
```
<img src="README.assets/image-20200618172942686.png" alt="image-20200618172942686" style="zoom:50%;" />

ë§Œë“¤ì—ˆë˜ ì»¤ìŠ¤í…€ ë¡œë”ë¡œ ì¸í•´ console.logê°€ ì•„ë‹ˆë¼ alert ë¡œ ë³€ê²½ëœ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.



#### 2.3.2. ìì£¼ ì‚¬ìš©í•˜ëŠ” ë¡œë” ì„¤ì •í•˜ê¸°

##### css-loader + style-loader

CSSë¥¼ ë²ˆë“¤ë§í•˜ê¸° ìœ„í•´ì„œëŠ” css-loaderì™€ style-loaderë¥¼ í•¨ê»˜ ì‚¬ìš©í•´ì•¼ í•œë‹¤.

**css-loader**ì„ ì‚¬ìš©í•˜ë©´, CSSë¥¼ ëª¨ë“ˆë¡œ ë³€í™˜í•´ import êµ¬ë¬¸ì„ ì‚¬ìš©í•´ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ìˆê²Œ í•´ì¤€ë‹¤.

```shell
$ npm install -D css-loader
```

ë¨¼ì € ë¡œë”ë¥¼ ì„¤ì¹˜í•œ ë’¤,

> webpack.config.js
```js
module.exports = {
  (ìƒëµ)
  module: {
    rules: [{
      test: /\.css$/, // .css í™•ì¥ìë¡œ ëë‚˜ëŠ” ëª¨ë“  íŒŒì¼ì—
      use: ['css-loader'], // css-loaderë¥¼ ì ìš© (ë¡œë” ì´ë¦„ì„ ë¬¸ìì—´ë¡œ ì „ë‹¬í•´ë„ ë¨) 
    }]
  }
}
```
webpack ì„¤ì •ì— css-loader ì„ ì¶”ê°€í•´ì¤€ë‹¤.

ì´ë ‡ê²Œ ì„¤ì •í•˜ê³  ë‚˜ë©´, ì›¹íŒ©ì€ entry pointì—ì„œ ì‹œì‘í•´ì„œ ëª¨ë“ˆì„ ê²€ìƒ‰í•˜ë‹¤ê°€ css íŒŒì¼ì„ ì°¾ìœ¼ë©´ css-loaderë¡œ ì²˜ë¦¬í•  ê²ƒì´ë‹¤.

ê·¸ëŸ°ë° CSSëŠ” ëª¨ë“ˆë¡œ ë³€ê²½í•œë‹¤ê³  (= ìë°”ìŠ¤í¬ë¦½íŠ¸ ì½”ë“œë¡œ ë³€ê²½ëœë‹¤ê³ ) ëë‚˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼, DOMì— ì¶”ê°€ë˜ì–´ì•¼ í•œë‹¤. ì´ë¥¼ ìœ„í•´ì„œ ìë°”ìŠ¤í¬ë¦½íŠ¸ë¡œ ë³€ê²½ëœ CSSë¥¼ ë™ì ìœ¼ë¡œ DOMì— ì¶”ê°€í•´ì£¼ëŠ” **style-loader**ì„ ì‚¬ìš©í•´ì•¼ í•œë‹¤.

css-loaderê³¼ ë™ì¼í•˜ê²Œ style-loaderì„ ì„¤ì¹˜í•œ ë’¤,

```shell
$ npm install -D style-loader
```

> webpack.config.js

```js
module.exports = {
  (ìƒëµ)
  module: {
    rules: [{
      test: /\.css$/,
      use: ['style-loader','css-loader'],
    }]
  }
}
```

webpack ì„¤ì •ì— style-loader ì„ ì¶”ê°€í•´ì¤€ë‹¤. ì´ ë•Œ ë°°ì—´ë¡œ ì„¤ì •í•˜ë©´ **ë’¤ì—ì„œë¶€í„° ì•ìœ¼ë¡œ** ë¡œë”ê°€ ë™ì‘í•˜ë¯€ë¡œ, ëª¨ë“  .css í™•ì¥ìë¡œ ëë‚˜ëŠ” ëª¨ë“ˆì„ ì½ì–´ë“¤ì—¬ css-loaderì„ ì ìš©í•˜ê³ , ê·¸ ë‹¤ìŒ style-loaderì„ ì ìš©í•œë‹¤.

style-loaderê¹Œì§€ ì ìš©í•œ ë’¤ ì•„ë˜ì²˜ëŸ¼ ê°„ë‹¨í•œ css íŒŒì¼ì„ App.jsì— import í•´ì£¼ë©´

<img src="README.assets/image-20200618185118117.png" alt="image-20200618185118117" style="zoom: 33%;" />

import í•œ CSS íŒŒì¼ì´ ì„±ê³µì ìœ¼ë¡œ ëª¨ë“ˆë¡œ ì˜ ì¸ì‹ë˜ì–´ ì ìš©ëœ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤. 

---

### References

[Webpackê³¼ Babelì„ ì´ìš©í•œ React ê°œë°œ í™˜ê²½ êµ¬ì„±í•˜ê¸°](https://medium.com/wasd/ì›¹íŒ©-webpack-ê³¼-ë°”ë²¨-babel-ì„-ì´ìš©í•œ-react-ê°œë°œ-í™˜ê²½-êµ¬ì„±í•˜ê¸°-fb87d0027766)

[React ê°œë°œ í™˜ê²½ì„ êµ¬ì¶•í•˜ë©´ì„œ ë°°ìš°ëŠ” ì›¹íŒ©(Webpack) ê¸°ì´ˆ]([https://velog.io/@jeff0720/React-%EA%B0%9C%EB%B0%9C-%ED%99%98%EA%B2%BD%EC%9D%84-%EA%B5%AC%EC%B6%95%ED%95%98%EB%A9%B4%EC%84%9C-%EB%B0%B0%EC%9A%B0%EB%8A%94-Webpack-%EA%B8%B0%EC%B4%88](https://velog.io/@jeff0720/React-ê°œë°œ-í™˜ê²½ì„-êµ¬ì¶•í•˜ë©´ì„œ-ë°°ìš°ëŠ”-Webpack-ê¸°ì´ˆ))

[í”„ë¡ íŠ¸ì—”ë“œ ê°œë°œí™˜ê²½ì˜ ì´í•´](http://jeonghwan-kim.github.io/series/2020/01/02/frontend-dev-env-webpack-intermediate.html)



